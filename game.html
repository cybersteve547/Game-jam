<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <a href="levels.html" class="text link">Back to levels</a>
    <br>
    <canvas id="canvas1" width="256" height="256"></canvas>
    <div class="kbd-grid border">
      <div class="kbd-button"><button>up</button></div>
      <div class="kbd-button"><button>left</button></div>
      <div class="kbd-button"><button>down</button></div>
      <div class="kbd-button"><button>right</button></div>
    </div>
    <script>
      const url = new URL(window.location.href);
      const canvas1 = document.getElementById("canvas1");
      const ctx = canvas1.getContext("2d");
      ctx.imageSmoothingEnabled = false;
      const spritesheet = new Image();
      spritesheet.src = "images/spritesheet.png"
      const level = url.searchParams.get("level");
      let px = 0;
      let py = 0;
      let pd = 1;
      const script = document.createElement("script");
      script.src = `lv1.js`;
      document.body.appendChild(script);

      function tick(timestamp) {
        ctx.clearRect(0, 0, 256, 128);
        ctx.drawImage(spritesheet, 0, pd * 8, 8, 8, px * 32, py * 32, 32, 32);
        requestAnimationFrame(tick);
      }

      requestAnimationFrame(tick);
    </script>
  </body>
</html>
